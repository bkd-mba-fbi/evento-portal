"use strict";(self.webpackChunkstellvertretung=self.webpackChunkstellvertretung||[]).push([[285],{8285:(Ae,q,d)=>{d.r(q),d.d(q,{SubstitutionsModule:()=>Ze});var c=d(6814),j=d(3131),m=d(1303),_=d(9483),t=d(5879);let T=(()=>{var e;class s{constructor(n,i){this.router=n,this.auth=i}canActivate(n,i){return!(!this.auth.isAuthenticated||!this.auth.hasRole(_.G))||(this.router.navigate(["/unauthenticated"]),!1)}}return(e=s).\u0275fac=function(n){return new(n||e)(t.LFG(m.F0),t.LFG(_.e))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),s})();var O=d(4537),b=d(525),l=d(6223),g=d(5619),x=d(2572),F=d(7921),p=d(7398),h=d(9515),L=d(2425),U=d(9495),$=d(8009);function H(e,s){if(1&e&&(t.TgZ(0,"div",19),t._uU(1),t.qZA()),2&e){const o=t.oxw();t.xp6(1),t.hij(" ",o.getFormControlErrors("Substitute")," ")}}function X(e,s){if(1&e&&(t.TgZ(0,"div",19),t._uU(1),t.qZA()),2&e){const o=t.oxw(2);t.xp6(1),t.hij(" ",o.getFormControlErrors("Holder")," ")}}function B(e,s){if(1&e){const o=t.EpF();t.TgZ(0,"div",2)(1,"div",3)(2,"label"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"erz-typeahead",4),t.NdJ("valueChange",function(i){t.CHM(o);const r=t.oxw();return t.KtG(r.holderId.setValue(i))}),t.ALo(6,"translate"),t.qZA(),t.YNc(7,X,2,1,"div",5),t.qZA()()}if(2&e){const o=t.oxw();t.xp6(3),t.Oqu(t.lcZ(4,5,"substitution-create.field-holder-label")),t.xp6(2),t.Q6J("placeholder",t.lcZ(6,7,"substitution-create.field-holder-placeholder"))("typeaheadService",o.teacherSubstitutionService.typeaheadService)("error",o.showErrors&&o.holderId.errors),t.xp6(2),t.Q6J("ngIf",o.showErrors&&o.holderId.errors)}}function V(e,s){if(1&e&&(t.TgZ(0,"div",19),t._uU(1),t.qZA()),2&e){const o=t.oxw();t.xp6(1),t.hij(" ",o.getFormControlErrors("DateFrom")," ")}}function R(e,s){if(1&e&&(t.TgZ(0,"div",19),t._uU(1),t.qZA()),2&e){const o=t.oxw();t.xp6(1),t.hij(" ",o.getFormControlErrors("DateTo")," ")}}function K(e,s){if(1&e&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&e){const o=s.$implicit;t.xp6(1),t.Oqu(o)}}function G(e,s){if(1&e&&(t.TgZ(0,"div",22),t.YNc(1,K,2,1,"p",23),t.qZA()),2&e){const o=s.ngIf;t.xp6(1),t.Q6J("ngForOf",o)}}function W(e,s){if(1&e&&(t.TgZ(0,"div",2)(1,"div",20),t.YNc(2,G,2,1,"div",21),t.ALo(3,"async"),t.qZA()()),2&e){const o=t.oxw();t.xp6(2),t.Q6J("ngIf",t.lcZ(3,1,o.errorMessage$))}}function tt(e,s){1&e&&t._UZ(0,"span",24)}let E=(()=>{var e;class s{constructor(n,i,r,a,u){this.teacherSubstitutionService=n,this.authService=i,this.translateService=r,this.changeDetector=a,this.toastr=u,this.cancelled=new t.vpe,this.saved=new t.vpe,this.dateFrom=new l.NI(null,l.kI.required),this.dateTo=new l.NI(null,l.kI.required),this.remarks=new l.NI,this.holderId=new l.NI(null,l.kI.required),this.substituteId=new l.NI(null,l.kI.required),this.serverErrorMessage$=new g.X(null),this.showErrors=!1,this.savingActive$=new g.X(!1),this.minStartDate=new Date(Date.now()),this.saved.subscribe(()=>u.success(r.instant("substitution-create.save-success-message")))}submit(){this.form.valid?(this.savingActive$.next(!0),this.teacherSubstitutionService.create(this.holderId.value,this.substituteId.value,this.dateFrom.value,this.dateTo.value,this.remarks.value).subscribe(n=>{this.savingActive$.next(!1),this.saved.emit()},n=>{this.savingActive$.next(!1),this.showErrors=!0,this.serverErrorMessage$.next(n.Issues.map(i=>i.Message))})):this.showErrors=!0}cancel(){this.cancelled.emit()}ngOnInit(){this.holderId.setValue(this.holderIdInput),this.form=new l.cw({DateFrom:this.dateFrom,DateTo:this.dateTo,Substitute:this.substituteId,Holder:this.holderId,Remarks:this.remarks}),this.clientErrorMessage$=this.form.valueChanges.pipe((0,F.O)(null),(0,p.U)(n=>[])),this.errorMessage$=(0,x.a)([this.serverErrorMessage$,this.clientErrorMessage$]).pipe((0,p.U)(n=>(n[0]??[]).concat(n[1]??[])),(0,p.U)(n=>0==n.length?null:n))}getAllFormControlErrors(){return Object.entries(this.form.controls).flatMap(([n,i])=>Object.entries(i.errors??{}).filter(([r,a])=>a).map(([r,a])=>r).map(r=>`${this.translate(["substitution-model",n])}: ${this.translate(["global","validation-errors",r])}`))}getFormControlErrors(n){let i=this.form.get(n);return null==i?[]:Object.entries(i.errors??{}).filter(([r,a])=>a).map(([r,a])=>r).map(r=>`${this.translate(["global","validation-errors",r])}`)}translate(n){return this.translateService.instant(n.join("."))}ngOnChanges(n){n.substitution&&null!=this.substitution&&(this.dateFrom.setValue(this.substitution.DateFrom),this.dateTo.setValue(this.substitution.DateTo),this.holderId.setValue(this.substitution.HolderId),this.substituteId.setValue(this.substitution.SubstituteId))}}return(e=s).\u0275fac=function(n){return new(n||e)(t.Y36(b.u),t.Y36(_.e),t.Y36(h.sK),t.Y36(t.sBO),t.Y36(L._W))},e.\u0275cmp=t.Xpm({type:e,selectors:[["erz-substitution-create"]],inputs:{holderIdInput:["holderId","holderIdInput"],substitution:"substitution"},outputs:{cancelled:"cancel",saved:"save"},features:[t.TTD],decls:46,vars:49,consts:[[3,"ngSubmit"],[1,"bootstrap","container-fluid"],[1,"bootstrap","row"],[1,"bootstrap","form-group","col"],[3,"placeholder","typeaheadService","error","valueChange"],["class","invalid-feedback",4,"ngIf"],["class","bootstrap row",4,"ngIf"],[1,"bootstrap","form-group","col-md-6"],[3,"placeholder","value","error","minDate","valueChange"],[3,"placeholder","value","error","valueChange"],[1,"bootstrap","col","mt-2"],[1,"d-flex","flex-row"],[1,"me-2"],[1,"material-icons"],["maxlength","512",1,"form-control",3,"placeholder","value","input"],[1,"bootstrap","col","mt-3"],["type","button",1,"btn","btn-secondary","ms-auto","text-light",3,"click"],["type","submit",1,"btn","btn-primary","ms-1","d-flex","align-items-center"],["class","spinner-border spinner-border-sm me-2","role","status","aria-hidden","true",4,"ngIf"],[1,"invalid-feedback"],[1,"bootstrap","col","mt-1"],["class","alert alert-danger mt-2",4,"ngIf"],[1,"alert","alert-danger","mt-2"],[4,"ngFor","ngForOf"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-2"]],template:function(n,i){1&n&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return i.submit()}),t.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"label"),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"erz-typeahead",4),t.NdJ("valueChange",function(a){return i.substituteId.setValue(a)}),t.ALo(8,"translate"),t.qZA(),t.YNc(9,H,2,1,"div",5),t.qZA()(),t.YNc(10,B,8,9,"div",6),t.TgZ(11,"div",2)(12,"div",7)(13,"label"),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.TgZ(16,"erz-date-select",8),t.NdJ("valueChange",function(a){return i.dateFrom.setValue(a)}),t.ALo(17,"translate"),t.qZA(),t.YNc(18,V,2,1,"div",5),t.qZA(),t.TgZ(19,"div",7)(20,"label"),t._uU(21),t.ALo(22,"translate"),t.qZA(),t.TgZ(23,"erz-date-select",9),t.NdJ("valueChange",function(a){return i.dateTo.setValue(a)}),t.ALo(24,"translate"),t.qZA(),t.YNc(25,R,2,1,"div",5),t.qZA()(),t.TgZ(26,"div",2)(27,"div",10)(28,"div",11)(29,"div",12)(30,"i",13),t._uU(31,"notes"),t.qZA()(),t.TgZ(32,"textarea",14),t.NdJ("input",function(a){return i.remarks.setValue(a.target.value)}),t.ALo(33,"translate"),t.qZA()()()(),t.YNc(34,W,4,3,"div",6),t.TgZ(35,"div",2)(36,"div",15)(37,"div",11)(38,"button",16),t.NdJ("click",function(){return i.cancel()}),t._uU(39),t.ALo(40,"translate"),t.qZA(),t.TgZ(41,"button",17),t.YNc(42,tt,1,0,"span",18),t.ALo(43,"async"),t._uU(44),t.ALo(45,"translate"),t.qZA()()()()()()),2&n&&(t.xp6(5),t.Oqu(t.lcZ(6,29,"substitution-create.field-substitute-label")),t.xp6(2),t.Q6J("placeholder",t.lcZ(8,31,"substitution-create.field-substitute-placeholder"))("typeaheadService",i.teacherSubstitutionService.typeaheadService)("error",i.showErrors&&i.substituteId.errors),t.xp6(2),t.Q6J("ngIf",i.showErrors&&i.substituteId.errors),t.xp6(1),t.Q6J("ngIf",null==i.holderIdInput),t.xp6(2),t.ekj("has-errors",i.showErrors&&i.dateFrom.errors),t.xp6(2),t.Oqu(t.lcZ(15,33,"substitution-create.field-date-from-label")),t.xp6(2),t.Q6J("placeholder",t.lcZ(17,35,"substitution-create.field-date-from-placeholder"))("value",i.dateFrom.value)("error",i.showErrors&&i.dateFrom.errors)("minDate",i.minStartDate),t.xp6(2),t.Q6J("ngIf",i.showErrors&&i.dateFrom.errors),t.xp6(1),t.ekj("has-errors",i.showErrors&&i.dateFrom.errors),t.xp6(2),t.Oqu(t.lcZ(22,37,"substitution-create.field-date-to-label")),t.xp6(2),t.Q6J("placeholder",t.lcZ(24,39,"substitution-create.field-date-to-placeholder"))("value",i.dateTo.value)("error",i.showErrors&&i.dateTo.errors),t.xp6(2),t.Q6J("ngIf",i.showErrors&&i.dateTo.errors),t.xp6(2),t.ekj("has-errors",i.showErrors&&i.remarks.errors),t.xp6(5),t.Q6J("placeholder",t.lcZ(33,41,"substitution-create.field-remarks-placeholder"))("value",i.remarks.value),t.xp6(2),t.Q6J("ngIf",i.showErrors),t.xp6(5),t.Oqu(t.lcZ(40,43,"substitution-create.cancel-button-label")),t.xp6(3),t.Q6J("ngIf",t.lcZ(43,45,i.savingActive$)),t.xp6(2),t.hij(" ",t.lcZ(45,47,"substitution-create.save-button-label")," "))},dependencies:[c.sg,c.O5,l._Y,l.JL,l.F,U.t,$.T,c.Ov,h.X$],styles:["[_ngcontent-%COMP%]:root{--stellvertretung-primary: #005189;--stellvertretung-primary-hover: #004272;--stellvertretung-secondary: rgb(138, 138, 138);--stellvertretung-secondary-hover: rgb(116, 116, 116)}.form-group[_ngcontent-%COMP%]{margin-bottom:.75rem}.form-group[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{margin-bottom:.5rem}.invalid-feedback[_ngcontent-%COMP%]{display:block}"]}),s})(),et=(()=>{var e;class s{constructor(n,i,r,a,u){this.route=n,this.router=i,this.teacherSubstitutionService=r,this.changeDetector=a,this.authService=u}ngOnInit(){}navigateToList(){this.router.navigate(["/substitutions/admin"])}}return(e=s).\u0275fac=function(n){return new(n||e)(t.Y36(m.gz),t.Y36(m.F0),t.Y36(b.u),t.Y36(t.sBO),t.Y36(_.e))},e.\u0275cmp=t.Xpm({type:e,selectors:[["erz-page-admin-substitution-create"]],decls:2,vars:0,consts:[[1,"erz-container-limited"],[3,"cancel","save"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0)(1,"erz-substitution-create",1),t.NdJ("cancel",function(){return i.navigateToList()})("save",function(){return i.navigateToList()}),t.qZA()())},dependencies:[E]}),s})();function nt(e,s){if(1&e&&(t.TgZ(0,"div",14),t._uU(1),t.qZA()),2&e){const o=t.oxw(2);t.xp6(1),t.hij(" ",o.getFormControlErrors("Holder")," ")}}function it(e,s){if(1&e){const o=t.EpF();t.TgZ(0,"div",5)(1,"div",11)(2,"label"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"erz-typeahead",12),t.NdJ("valueChange",function(i){t.CHM(o);const r=t.oxw();return t.KtG(r.holderId.setValue(i))}),t.ALo(6,"translate"),t.qZA(),t.YNc(7,nt,2,1,"div",13),t.qZA()()}if(2&e){const o=t.oxw();t.xp6(3),t.Oqu(t.lcZ(4,5,"substitution-create-ad-hoc.field-holder-label")),t.xp6(2),t.Q6J("placeholder",t.lcZ(6,7,"substitution-create-ad-hoc.field-holder-placeholder"))("typeaheadService",o.teacherSubstitutionService.typeaheadService)("error",o.showErrors&&o.holderId.errors),t.xp6(2),t.Q6J("ngIf",o.showErrors&&o.holderId.errors)}}function ot(e,s){if(1&e&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&e){const o=s.$implicit;t.xp6(1),t.Oqu(o)}}function st(e,s){if(1&e&&(t.TgZ(0,"div",17),t.YNc(1,ot,2,1,"p",18),t.qZA()),2&e){const o=s.ngIf;t.xp6(1),t.Q6J("ngForOf",o)}}function rt(e,s){if(1&e&&(t.TgZ(0,"div",5)(1,"div",15),t.YNc(2,st,2,1,"div",16),t.ALo(3,"async"),t.qZA()()),2&e){const o=t.oxw();t.xp6(2),t.Q6J("ngIf",t.lcZ(3,1,o.errorMessage$))}}function at(e,s){1&e&&t._UZ(0,"span",19)}let ut=(()=>{var e;class s{constructor(n,i,r,a,u){this.teacherSubstitutionService=n,this.authService=i,this.translateService=r,this.changeDetector=a,this.toastr=u,this.cancelled=new t.vpe,this.saved=new t.vpe,this.dateFrom=new l.NI(null,l.kI.required),this.dateTo=new l.NI(null,l.kI.required),this.remarks=new l.NI,this.holderId=new l.NI(null,l.kI.required),this.substituteId=new l.NI(null,l.kI.required),this.serverErrorMessage$=new g.X(null),this.showErrors=!1,this.savingActive$=new g.X(!1),this.minStartDate=new Date(Date.now()),this.saved.subscribe(()=>u.success(r.instant("substitution-create.save-success-message")))}submit(){if(!this.form.valid)return console.log("submit ad hoc ERROR"),void(this.showErrors=!0);console.log("submit ad hoc"),this.savingActive$.next(!0),this.teacherSubstitutionService.createAdHoc(this.holderId.value).subscribe(n=>{console.log("adhoc created",n),this.savingActive$.next(!1),this.saved.emit(),this.teacherSubstitutionService.startAdHoc(n)},n=>{this.savingActive$.next(!1),this.showErrors=!0,this.serverErrorMessage$.next(n.Issues.map(i=>i.Message))})}cancel(){this.cancelled.emit()}ngOnInit(){this.holderId.setValue(this.holderIdInput),this.form=new l.cw({Holder:this.holderId}),this.clientErrorMessage$=this.form.valueChanges.pipe((0,F.O)(null),(0,p.U)(n=>[])),this.errorMessage$=(0,x.a)([this.serverErrorMessage$,this.clientErrorMessage$]).pipe((0,p.U)(n=>(n[0]??[]).concat(n[1]??[])),(0,p.U)(n=>0==n.length?null:n))}getAllFormControlErrors(){return Object.entries(this.form.controls).flatMap(([n,i])=>Object.entries(i.errors??{}).filter(([r,a])=>a).map(([r,a])=>r).map(r=>`${this.translate(["substitution-model",n])}: ${this.translate(["global","validation-errors",r])}`))}getFormControlErrors(n){let i=this.form.get(n);return null==i?[]:Object.entries(i.errors??{}).filter(([r,a])=>a).map(([r,a])=>r).map(r=>`${this.translate(["global","validation-errors",r])}`)}translate(n){return this.translateService.instant(n.join("."))}ngOnChanges(n){n.substitution&&null!=this.substitution&&(this.dateFrom.setValue(this.substitution.DateFrom),this.dateTo.setValue(this.substitution.DateTo),this.holderId.setValue(this.substitution.HolderId),this.substituteId.setValue(this.substitution.SubstituteId))}}return(e=s).\u0275fac=function(n){return new(n||e)(t.Y36(b.u),t.Y36(_.e),t.Y36(h.sK),t.Y36(t.sBO),t.Y36(L._W))},e.\u0275cmp=t.Xpm({type:e,selectors:[["erz-substitution-create-ad-hoc"]],inputs:{holderIdInput:["holderId","holderIdInput"],substitution:"substitution"},outputs:{cancelled:"cancel",saved:"save"},features:[t.TTD],decls:20,vars:14,consts:[[3,"ngSubmit"],[1,"bootstrap","container-fluid"],[1,"row"],[1,"col"],["class","bootstrap row",4,"ngIf"],[1,"bootstrap","row"],[1,"bootstrap","col","mt-3"],[1,"d-flex","flex-row"],["type","button",1,"btn","btn-secondary","ms-auto","text-light",3,"click"],["type","submit",1,"btn","btn-primary","ms-1","d-flex","align-items-center"],["class","spinner-border spinner-border-sm me-2","role","status","aria-hidden","true",4,"ngIf"],[1,"bootstrap","form-group","col"],[3,"placeholder","typeaheadService","error","valueChange"],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"],[1,"bootstrap","col","mt-1"],["class","alert alert-danger mt-2",4,"ngIf"],[1,"alert","alert-danger","mt-2"],[4,"ngFor","ngForOf"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-2"]],template:function(n,i){1&n&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return i.submit()}),t.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"h5"),t._uU(5),t.ALo(6,"translate"),t.qZA()()(),t.YNc(7,it,8,9,"div",4),t.YNc(8,rt,4,3,"div",4),t.TgZ(9,"div",5)(10,"div",6)(11,"div",7)(12,"button",8),t.NdJ("click",function(){return i.cancel()}),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"button",9),t.YNc(16,at,1,0,"span",10),t.ALo(17,"async"),t._uU(18),t.ALo(19,"translate"),t.qZA()()()()()()),2&n&&(t.xp6(5),t.Oqu(t.lcZ(6,6,"substitution-create-ad-hoc.title")),t.xp6(2),t.Q6J("ngIf",null==i.holderIdInput),t.xp6(1),t.Q6J("ngIf",i.showErrors),t.xp6(5),t.Oqu(t.lcZ(14,8,"substitution-create-ad-hoc.cancel-button-label")),t.xp6(3),t.Q6J("ngIf",t.lcZ(17,10,i.savingActive$)),t.xp6(2),t.hij(" ",t.lcZ(19,12,"substitution-create-ad-hoc.save-button-label")," "))},dependencies:[c.sg,c.O5,l._Y,l.JL,l.F,U.t,c.Ov,h.X$],styles:["[_ngcontent-%COMP%]:root{--stellvertretung-primary: #005189;--stellvertretung-primary-hover: #004272;--stellvertretung-secondary: rgb(138, 138, 138);--stellvertretung-secondary-hover: rgb(116, 116, 116)}.form-group[_ngcontent-%COMP%]{margin-bottom:.75rem}.form-group[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{margin-bottom:.5rem}.invalid-feedback[_ngcontent-%COMP%]{display:block}"]}),s})(),lt=(()=>{var e;class s{constructor(n,i,r,a,u){this.route=n,this.router=i,this.teacherSubstitutionService=r,this.changeDetector=a,this.authService=u}ngOnInit(){}navigateToList(){this.router.navigate(["/substitutions/admin"])}}return(e=s).\u0275fac=function(n){return new(n||e)(t.Y36(m.gz),t.Y36(m.F0),t.Y36(b.u),t.Y36(t.sBO),t.Y36(_.e))},e.\u0275cmp=t.Xpm({type:e,selectors:[["erz-page-admin-substitution-create-ad-hoc"]],decls:2,vars:0,consts:[[1,"erz-container-limited"],[3,"cancel","save"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0)(1,"erz-substitution-create-ad-hoc",1),t.NdJ("cancel",function(){return i.navigateToList()})("save",function(){return i.navigateToList()}),t.qZA()())},dependencies:[ut]}),s})();var f=d(9397),M=d(4664),I=d(3020),S=d(9468),ct=d(5592),dt=d(2554);function mt(e,s){1&e&&t._UZ(0,"span",28)}function pt(e,s){if(1&e){const o=t.EpF();t.TgZ(0,"div",24),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"div",25)(4,"button",26),t.NdJ("click",function(){const r=t.CHM(o).$implicit;return t.KtG(r.dismiss())}),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"button",27),t.NdJ("click",function(){t.CHM(o);const i=t.oxw();return t.KtG(i.delete())}),t.YNc(8,mt,1,0,"span",23),t.ALo(9,"async"),t._uU(10),t.ALo(11,"translate"),t.qZA()()}if(2&e){const o=t.oxw();t.xp6(1),t.hij(" ",t.lcZ(2,4,"substitution-edit.confirm-delete-message")," "),t.xp6(4),t.Oqu(t.lcZ(6,6,"substitution-edit.confirm-delete-cancel-button-label")),t.xp6(3),t.Q6J("ngIf",t.lcZ(9,8,o.deletingActive$)),t.xp6(2),t.hij(" ",t.lcZ(11,10,"substitution-edit.confirm-delete-confirm-button-label")," ")}}function gt(e,s){if(1&e&&(t.TgZ(0,"div")(1,"h5",29),t._uU(2),t.TgZ(3,"div",30),t._uU(4),t.ALo(5,"translate"),t.qZA()()()),2&e){const o=t.oxw();let n,i;t.xp6(2),t.hij(" ",null!==(n=null==o.substitution?null:o.substitution.Substitute)&&void 0!==n?n:"Title"," "),t.xp6(2),t.AsE("",t.lcZ(5,3,"substitution-edit.title-holder-prefix")," ",null!==(i=null==o.substitution?null:o.substitution.Holder)&&void 0!==i?i:"Holder","")}}function bt(e,s){if(1&e&&(t.TgZ(0,"div")(1,"h5",29),t._uU(2),t.qZA()()),2&e){const o=t.oxw();let n;t.xp6(2),t.Oqu(null!==(n=null==o.substitution?null:o.substitution.Substitute)&&void 0!==n?n:"Title")}}function _t(e,s){if(1&e&&(t.TgZ(0,"div",14),t._uU(1),t.qZA()),2&e){const o=t.oxw();t.xp6(1),t.hij(" ",o.getFormControlErrors("DateFrom")," ")}}function ht(e,s){if(1&e&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&e){const o=s.$implicit;t.xp6(1),t.Oqu(o)}}function vt(e,s){if(1&e&&(t.TgZ(0,"div",31),t.YNc(1,ht,2,1,"p",32),t.qZA()),2&e){const o=s.ngIf;t.xp6(1),t.Q6J("ngForOf",o)}}function ft(e,s){1&e&&t._UZ(0,"span",28)}let Y=(()=>{var e;class s{constructor(n,i,r,a,u){this.teacherSubstitutionService=n,this.translateService=i,this.modalService=r,this.changeDetector=a,this.toastr=u,this.showHolder=!1,this.cancelled=new t.vpe,this.saved=new t.vpe,this.deleted=new t.vpe,this.id=new l.NI,this.dateFrom=new l.NI(null,l.kI.required),this.dateTo=new l.NI(null,l.kI.required),this.remarks=new l.NI,this.errorMessage$=new ct.y,this.serverErrorMessage$=new g.X(null),this.showErrors=!1,this.savingActive$=new g.X(!1),this.deletingActive$=new g.X(!1),this.minStartDate=new Date(Date.now()),this.saved.subscribe(()=>u.success(i.instant("substitution-edit.save-success-message"))),this.deleted.subscribe(()=>u.success(i.instant("substitution-edit.delete-success-message")))}submit(){this.form.valid?(this.savingActive$.next(!0),this.teacherSubstitutionService.edit(this.id.value,this.dateFrom.value,this.dateTo.value,this.remarks.value).subscribe(n=>{this.savingActive$.next(!1),this.saved.emit()},n=>{this.savingActive$.next(!1),this.serverErrorMessage$.next(n.Issues.map(i=>i.Message))})):this.showErrors=!0}delete(){this.deletingActive$.next(!0),this.teacherSubstitutionService.delete(this.id.value).subscribe(n=>{this.deletingActive$.next(!1),this.deleted.emit()},n=>{this.serverErrorMessage$.next(n.Issues.map(i=>i.Message))})}cancel(){this.cancelled.emit()}ngOnInit(){this.form=new l.cw({DateFrom:this.dateFrom,DateTo:this.dateTo,Remarks:this.remarks}),this.clientErrorMessage$=this.form.statusChanges.pipe((0,p.U)(n=>[])),this.errorMessage$=(0,x.a)([this.serverErrorMessage$,this.clientErrorMessage$]).pipe((0,p.U)(n=>(n[0]??[]).concat(n[1]??[])),(0,p.U)(n=>0==n.length?null:n))}getAllFormControlErrors(){return Object.entries(this.form.controls).flatMap(([n,i])=>Object.entries(i.errors??{}).filter(([r,a])=>a).map(([r,a])=>r).map(r=>`${this.translate(["substitution-model",n])}: ${this.translate(["global","validation-errors",r])}`))}getFormControlErrors(n){let i=this.form.get(n);return null==i?[]:Object.entries(i.errors??{}).filter(([r,a])=>a).map(([r,a])=>r).map(r=>`${this.translate(["global","validation-errors",r])}`)}translate(n){return this.translateService.instant(n.join("."))}ngOnChanges(n){n.substitution&&null!=this.substitution&&(this.id.setValue(this.substitution.Id),this.dateFrom.setValue(this.substitution.DateFrom),this.dateTo.setValue(this.substitution.DateTo),this.remarks.setValue(this.substitution.Remarks))}ngOnDestroy(){this.modalService.dismissAll()}}return(e=s).\u0275fac=function(n){return new(n||e)(t.Y36(b.u),t.Y36(h.sK),t.Y36(dt.FF),t.Y36(t.sBO),t.Y36(L._W))},e.\u0275cmp=t.Xpm({type:e,selectors:[["erz-substitution-edit"]],inputs:{substitution:"substitution",showHolder:["show-holder","showHolder"]},outputs:{cancelled:"cancel",saved:"save",deleted:"delete"},features:[t.TTD],decls:52,vars:47,consts:[["deleteModal",""],[3,"ngSubmit"],[1,"bootstrap","container-fluid"],[1,"bootstrap","row"],[1,"bootstrap","col"],[1,"d-flex","flex-row"],[4,"ngIf"],[1,"ms-auto"],["type","button",1,"btn","btn-primary",3,"click"],[1,"material-icons"],[1,"bootstrap","form-group","col-md-6"],[3,"placeholder","value","error","minDate","valueChange"],["class","invalid-feedback",4,"ngIf"],[3,"placeholder","value","error","valueChange"],[1,"invalid-feedback"],[1,"bootstrap","col","mt-2"],[1,"me-2"],["maxlength","512",1,"form-control",3,"placeholder","value","input"],[1,"col","mt-2"],["class","alert alert-danger mt-2",4,"ngIf"],[1,"bootstrap","col","mt-1"],["type","button",1,"btn","btn-secondary","ms-auto","text-light",3,"click"],["type","submit",1,"btn","btn-primary","ms-1","d-flex","align-items-center"],["class","spinner-border spinner-border-sm me-2","role","status","aria-hidden","true",4,"ngIf"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary","btn-min-width",3,"click"],["type","button",1,"btn","btn-primary","btn-min-width","d-flex","align-items-center",3,"click"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-2"],[1,"fw-bold"],[1,"sub-heading"],[1,"alert","alert-danger","mt-2"],[4,"ngFor","ngForOf"]],template:function(n,i){if(1&n){const r=t.EpF();t.YNc(0,pt,12,12,"ng-template",null,0,t.W1O),t.TgZ(2,"form",1),t.NdJ("ngSubmit",function(){return i.submit()}),t.TgZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5),t.YNc(7,gt,6,5,"div",6),t.YNc(8,bt,3,1,"div",6),t.TgZ(9,"div",7)(10,"button",8),t.NdJ("click",function(){t.CHM(r);const u=t.MAs(1);return t.KtG(i.modalService.open(u))}),t.TgZ(11,"i",9),t._uU(12,"delete"),t.qZA()()()()()(),t.TgZ(13,"div",3)(14,"div",10)(15,"label"),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"erz-date-select",11),t.NdJ("valueChange",function(u){return i.dateFrom.setValue(u)}),t.ALo(19,"translate"),t.qZA(),t.YNc(20,_t,2,1,"div",12),t.qZA(),t.TgZ(21,"div",10)(22,"label"),t._uU(23),t.ALo(24,"translate"),t.qZA(),t.TgZ(25,"erz-date-select",13),t.NdJ("valueChange",function(u){return i.dateTo.setValue(u)}),t.ALo(26,"translate"),t.qZA(),t.TgZ(27,"div",14),t._uU(28),t.qZA()()(),t.TgZ(29,"div",3)(30,"div",15)(31,"div",5)(32,"div",16)(33,"i",9),t._uU(34,"notes"),t.qZA()(),t.TgZ(35,"textarea",17),t.NdJ("input",function(u){return i.remarks.setValue(u.target.value)}),t.ALo(36,"translate"),t.qZA()()()(),t.TgZ(37,"div",3)(38,"div",18),t.YNc(39,vt,2,1,"div",19),t.ALo(40,"async"),t.qZA()(),t.TgZ(41,"div",3)(42,"div",20)(43,"div",5)(44,"button",21),t.NdJ("click",function(){return i.cancel()}),t._uU(45),t.ALo(46,"translate"),t.qZA(),t.TgZ(47,"button",22),t.YNc(48,ft,1,0,"span",23),t.ALo(49,"async"),t._uU(50),t.ALo(51,"translate"),t.qZA()()()()()()}2&n&&(t.xp6(7),t.Q6J("ngIf",i.showHolder),t.xp6(1),t.Q6J("ngIf",!i.showHolder),t.xp6(6),t.ekj("has-errors",i.showErrors&&i.dateFrom.errors),t.xp6(2),t.Oqu(t.lcZ(17,29,"substitution-edit.field-date-from-label")),t.xp6(2),t.ekj("is-invalid",i.showErrors&&i.dateFrom.errors),t.Q6J("placeholder",t.lcZ(19,31,"substitution-edit.field-date-from-placeholder"))("value",i.dateFrom.value)("error",i.showErrors&&i.dateFrom.errors)("minDate",i.minStartDate),t.xp6(2),t.Q6J("ngIf",i.showErrors&&i.dateFrom.errors),t.xp6(1),t.ekj("has-errors",i.showErrors&&i.dateTo.errors),t.xp6(2),t.Oqu(t.lcZ(24,33,"substitution-edit.field-date-to-label")),t.xp6(2),t.ekj("is-invalid",i.showErrors&&i.dateTo.errors),t.Q6J("placeholder",t.lcZ(26,35,"substitution-edit.field-date-to-placeholder"))("value",i.dateTo.value)("error",i.showErrors&&i.dateTo.errors),t.xp6(3),t.hij(" ",i.getFormControlErrors("DateTo")," "),t.xp6(3),t.ekj("has-errors",i.showErrors&&i.remarks.errors),t.xp6(4),t.Q6J("placeholder",t.lcZ(36,37,"substitution-edit.field-remarks-placeholder"))("value",i.remarks.value),t.xp6(4),t.Q6J("ngIf",t.lcZ(40,39,i.errorMessage$)),t.xp6(6),t.Oqu(t.lcZ(46,41,"substitution-edit.cancel-button-label")),t.xp6(3),t.Q6J("ngIf",t.lcZ(49,43,i.savingActive$)),t.xp6(2),t.hij(" ",t.lcZ(51,45,"substitution-edit.save-button-label")," "))},dependencies:[c.sg,c.O5,l._Y,l.JL,l.F,$.T,c.Ov,h.X$],styles:["[_ngcontent-%COMP%]:root{--stellvertretung-primary: #005189;--stellvertretung-primary-hover: #004272;--stellvertretung-secondary: rgb(138, 138, 138);--stellvertretung-secondary-hover: rgb(116, 116, 116)}.sub-heading[_ngcontent-%COMP%]{font-weight:400}.error[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .error[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{border-color:red}.form-group[_ngcontent-%COMP%]{margin-bottom:.75rem}.form-group[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{margin-bottom:.5rem}.invalid-feedback[_ngcontent-%COMP%]{display:block}"]}),s})();function Ct(e,s){1&e&&(t.TgZ(0,"div"),t._UZ(1,"erz-spinner"),t.qZA())}let Zt=(()=>{var e;class s{constructor(n,i,r,a){this.route=n,this.router=i,this.teacherSubstitutionService=r,this.changeDetector=a,this.isLoading=!0}ngOnInit(){this.substitution$=this.route.paramMap.pipe((0,f.b)(n=>{this.isLoading=!0,this.changeDetector.markForCheck()}),(0,p.U)(n=>n.get("id")),(0,p.U)(n=>parseInt(n)),(0,M.w)(n=>this.teacherSubstitutionService.get(n)),(0,f.b)(n=>{this.isLoading=!1,this.changeDetector.markForCheck()}),(0,I.B)()),this.substitution$.subscribe(n=>null)}navigateToList(){this.router.navigate(["/substitutions/admin"])}}return(e=s).\u0275fac=function(n){return new(n||e)(t.Y36(m.gz),t.Y36(m.F0),t.Y36(b.u),t.Y36(t.sBO))},e.\u0275cmp=t.Xpm({type:e,selectors:[["erz-page-admin-substitution-edit"]],decls:4,vars:7,consts:[[4,"ngIf"],[1,"erz-container-limited"],[3,"substitution","show-holder","save","cancel","delete"]],template:function(n,i){1&n&&(t.YNc(0,Ct,2,0,"div",0),t.TgZ(1,"div",1)(2,"erz-substitution-edit",2),t.NdJ("save",function(){return i.navigateToList()})("cancel",function(){return i.navigateToList()})("delete",function(){return i.navigateToList()}),t.ALo(3,"async"),t.qZA()()),2&n&&(t.Q6J("ngIf",i.isLoading),t.xp6(2),t.Udp("display",i.isLoading?"none":"block"),t.Q6J("substitution",t.lcZ(3,5,i.substitution$))("show-holder",!0))},dependencies:[c.O5,S.O,Y,c.Ov]}),s})();var At=d(5177),J=d(6283);function St(e,s){1&e&&(t.TgZ(0,"div",12),t._UZ(1,"erz-spinner"),t.qZA())}function Tt(e,s){if(1&e&&(t.TgZ(0,"div",4),t._uU(1),t.qZA()),2&e){const o=t.oxw();t.xp6(1),t.hij(" ",o.emptyMessage," ")}}function Ot(e,s){if(1&e&&(t.TgZ(0,"div",17)(1,"i",18),t._uU(2,"notes"),t.qZA(),t.TgZ(3,"div"),t._uU(4),t.qZA()()),2&e){const o=t.oxw().$implicit;t.xp6(4),t.Oqu(o.Remarks)}}const xt=function(e){return["edit",e]};function Mt(e,s){if(1&e&&(t.TgZ(0,"tr")(1,"td",6),t._uU(2),t.qZA(),t.TgZ(3,"td",7),t._uU(4),t.ALo(5,"date"),t._UZ(6,"wbr"),t._uU(7),t.ALo(8,"date"),t.qZA(),t.TgZ(9,"td",8),t.YNc(10,Ot,5,1,"div",13),t.qZA(),t.TgZ(11,"td",14)(12,"a",15)(13,"i",16),t._uU(14,"edit"),t.qZA()()()()),2&e){const o=s.$implicit;t.xp6(2),t.hij(" ",o.Substitute," "),t.xp6(2),t.hij(" ",t.lcZ(5,5,o.DateFrom),"\u2013"),t.xp6(3),t.hij("",t.lcZ(8,7,o.DateTo)," "),t.xp6(3),t.Q6J("ngIf",o.Remarks),t.xp6(2),t.Q6J("routerLink",t.VKq(9,xt,o.Id))}}let D=(()=>{var e;class s{constructor(n,i){this.teacherSubstitutionService=n,this.changeDetector=i,this.emptyMessage="",this.sortColumn$=new g.X(null),this.sortDirection$=new g.X(!1),this.filter$=new g.X(""),this.showHolder=!1,this.editLinkFunc=r=>["edit",r],this.isLoading=!0,this.isEmpty=!1,this.update$=new g.X(new Date),this.listSize$=new g.X(50),this.totalCount$=new g.X(0)}get sortColumn(){return this.sortColumn$.value??""}set sortColumn(n){this.sortColumn$.next(n)}get sortDirection(){return this.sortDirection$.value}set sortDirection(n){this.sortDirection$.next(n)}get filter(){return this.filter$.value}set filter(n){this.filter$.next(n??"")}ngOnInit(){this.substitutions$=(0,x.a)([this.listSize$,this.update$.pipe((0,At.g)(1e3),(0,M.w)(n=>this.substitutionsInput$??this.teacherSubstitutionService.getMyList()),(0,I.B)()),this.filter$.pipe((0,f.b)(()=>this.listSize$.next(50)),(0,p.U)(n=>n.toLowerCase())),this.sortColumn$,this.sortDirection$]).pipe((0,p.U)(n=>{let[i,r,a,u,Z]=n;const P=(C,v)=>C==v?0:(C??"")>(v??"")?-1:1,A=C=>(v,k)=>((C,v,k)=>{for(let z of k){let Q=P(C[z],v[z]);if(0!=Q)return Q}return 0})(v,k,C);if(null==u)r=Array.from(r).sort(A(["DateFrom","Substitute"])).reverse();else{let C=u,v=Array.from(r).sort(A([C,"DateFrom","Substitute"]));r=Z?v.reverse():v}return this.totalCount$.next(r.length),{listSize:i,items:r,filter:a}}),(0,p.U)(({listSize:n,items:i,filter:r})=>[n,i.filter(a=>""==r||a.Holder.toLowerCase().includes(r)||a.Substitute.toLowerCase().includes(r))]),(0,p.U)(n=>n[1].slice(0,n[0])),(0,f.b)(n=>{this.isLoading=!1,this.isEmpty=0==n.length,this.changeDetector.markForCheck()}))}sortBy(n){this.sortColumn==n?this.sortDirection=!this.sortDirection:(this.sortColumn=n,this.sortDirection=!0),this.changeDetector.markForCheck()}onScroll(){this.listSize$.next(this.listSize$.value+10)}deleteSubstitution(n){this.teacherSubstitutionService.delete(n).subscribe(i=>{this.update$.next(new Date)})}}return(e=s).\u0275fac=function(n){return new(n||e)(t.Y36(b.u),t.Y36(t.sBO))},e.\u0275cmp=t.Xpm({type:e,selectors:[["erz-substitution-list"]],inputs:{emptyMessage:["empty-message","emptyMessage"],sortColumn:["sort-column","sortColumn"],sortDirection:["sort-direction","sortDirection"],filter:"filter",showHolder:["show-holder","showHolder"],editLinkFunc:["edit-link","editLinkFunc"],substitutionsInput$:["substitutions$","substitutionsInput$"]},decls:21,vars:18,consts:[[1,"bootstrap","container-fluid","mt-xs-0","mt-md-2"],["class","mt-2",4,"ngIf"],[1,"bootstrap","row"],["class","bootstrap col",4,"ngIf"],[1,"bootstrap","col"],[1,"table"],[1,"column-substitute","ps-0"],[1,"column-date-range"],[1,"column-remarks"],[1,"column-actions"],["infiniteScroll","",3,"scrolled"],[4,"ngFor","ngForOf"],[1,"mt-2"],["class","d-flex flex-row d-md-block",4,"ngIf"],[1,"column-actions","text-end","pe-0"],[1,"btn","btn-primary",3,"routerLink"],[1,"material-icons"],[1,"d-flex","flex-row","d-md-block"],[1,"material-icons","d-md-none","me-1"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0),t.YNc(1,St,2,0,"div",1),t.TgZ(2,"div",2),t.YNc(3,Tt,2,1,"div",3),t.TgZ(4,"div",4)(5,"table",5)(6,"thead")(7,"tr")(8,"th",6),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"th",7),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"th",8),t._uU(15),t.ALo(16,"translate"),t.qZA(),t._UZ(17,"th",9),t.qZA()(),t.TgZ(18,"tbody",10),t.NdJ("scrolled",function(){return i.onScroll()}),t.YNc(19,Mt,15,11,"tr",11),t.ALo(20,"async"),t.qZA()()()()()),2&n&&(t.xp6(1),t.Q6J("ngIf",i.isLoading),t.xp6(1),t.Udp("display",i.isLoading?"none":null),t.xp6(1),t.Q6J("ngIf",i.isEmpty),t.xp6(1),t.Udp("display",i.isEmpty?"none":null),t.xp6(5),t.Oqu(t.lcZ(10,10,"substitution-list.column-title-substitute")),t.xp6(3),t.Oqu(t.lcZ(13,12,"substitution-list.column-title-date-range")),t.xp6(3),t.Oqu(t.lcZ(16,14,"substitution-list.column-title-remarks")),t.xp6(4),t.Q6J("ngForOf",t.lcZ(20,16,i.substitutions$)))},dependencies:[c.sg,c.O5,m.rH,J.Ry,S.O,c.Ov,c.uU,h.X$],styles:["[_ngcontent-%COMP%]:root{--stellvertretung-primary: #005189;--stellvertretung-primary-hover: #004272;--stellvertretung-secondary: rgb(138, 138, 138);--stellvertretung-secondary-hover: rgb(116, 116, 116)}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{cursor:pointer}.table[_ngcontent-%COMP%]   th.column-substitute[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th.column-holder[_ngcontent-%COMP%]{width:25%}.table[_ngcontent-%COMP%]   th.column-date-range[_ngcontent-%COMP%]{width:20%}.table[_ngcontent-%COMP%]   th.column-remarks[_ngcontent-%COMP%]{width:30%}.table[_ngcontent-%COMP%]   th.column-actions[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td.column-actions[_ngcontent-%COMP%]{width:1%}.table[_ngcontent-%COMP%]   td.column-remarks[_ngcontent-%COMP%]{white-space:pre-line}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:top}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:not(.column-actions){padding-top:.66rem;padding-bottom:.66rem}@media (max-width: 768px){table.table[_ngcontent-%COMP%], table.table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%]{display:contents}table.table[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%]{display:none}table.table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto min-content;grid-template-rows:auto}.container-fluid[_ngcontent-%COMP%]   table.table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]{margin-left:calc(-1 * var(--bs-gutter-x, 1.5rem));margin-right:calc(-1 * var(--bs-gutter-x, 1.5rem));padding-left:var(--bs-gutter-x, 1.5rem);padding-right:var(--bs-gutter-x, 1.5rem)}table.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{width:auto}table.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], table.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:not(.column-actions){display:block;grid-column:1;border:none;padding:.065rem 0}table.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{padding:12px 0;border-bottom:1px solid var(--bs-border-color)}table.table[_ngcontent-%COMP%]   td.column-actions[_ngcontent-%COMP%]{grid-column:2;grid-row-start:1;grid-row-end:3;white-space:nowrap;display:flexbox;flex-direction:row}table.table[_ngcontent-%COMP%]   td.column-substitute[_ngcontent-%COMP%]{font-weight:700}.search-container[_ngcontent-%COMP%]{max-width:none}}"]}),s})();function wt(e,s){1&e&&(t.TgZ(0,"span"),t._uU(1,"\u2191"),t.qZA())}function Pt(e,s){1&e&&(t.TgZ(0,"span"),t._uU(1,"\u2193"),t.qZA())}function Lt(e,s){if(1&e&&(t.TgZ(0,"span"),t.YNc(1,wt,2,0,"span",34),t.YNc(2,Pt,2,0,"span",34),t.qZA()),2&e){const o=t.oxw(2);t.xp6(1),t.Q6J("ngIf",o.sortDirection),t.xp6(1),t.Q6J("ngIf",!o.sortDirection)}}function It(e,s){if(1&e){const o=t.EpF();t.TgZ(0,"span",33),t.NdJ("click",function(){const r=t.CHM(o).column,a=t.oxw();return t.KtG(a.sortBy(r.id))}),t._uU(1),t.YNc(2,Lt,3,2,"span",34),t.qZA()}if(2&e){const o=s.column,n=t.oxw();t.xp6(1),t.hij(" ",o.label," "),t.xp6(1),t.Q6J("ngIf",n.sortColumn==o.id)}}function yt(e,s){1&e&&(t.TgZ(0,"div",2)(1,"div",23),t._UZ(2,"erz-spinner"),t.qZA()())}function kt(e,s){if(1&e){const o=t.EpF();t.TgZ(0,"button",35),t.NdJ("click",function(){t.CHM(o);const i=t.oxw();return t.KtG(i.filter="")}),t.TgZ(1,"i",9),t._uU(2,"clear"),t.qZA()()}}function qt(e,s){}function Ft(e,s){1&e&&t.YNc(0,qt,0,0,"ng-template")}function Ut(e,s){}function $t(e,s){1&e&&t.YNc(0,Ut,0,0,"ng-template")}function Et(e,s){}function Yt(e,s){1&e&&t.YNc(0,Et,0,0,"ng-template")}function Jt(e,s){}function Nt(e,s){1&e&&t.YNc(0,Jt,0,0,"ng-template")}function Dt(e,s){if(1&e&&(t.TgZ(0,"div",39)(1,"i",40),t._uU(2,"notes"),t.qZA(),t.TgZ(3,"div"),t._uU(4),t.qZA()()),2&e){const o=t.oxw().$implicit;t.xp6(4),t.Oqu(o.Remarks)}}const zt=function(e){return["edit",e]};function Qt(e,s){if(1&e&&(t.TgZ(0,"tr")(1,"td",25),t._uU(2),t.qZA(),t.TgZ(3,"td",27)(4,"span",36),t._uU(5),t.ALo(6,"translate"),t.qZA(),t._uU(7),t.qZA(),t.TgZ(8,"td",28),t._uU(9),t.ALo(10,"date"),t._UZ(11,"wbr"),t._uU(12),t.ALo(13,"date"),t.qZA(),t.TgZ(14,"td",29),t.YNc(15,Dt,5,1,"div",37),t.qZA(),t.TgZ(16,"td",38)(17,"a",8)(18,"i",9),t._uU(19,"edit"),t.qZA()()()()),2&e){const o=s.$implicit;t.xp6(2),t.hij(" ",o.Substitute," "),t.xp6(3),t.Oqu(t.lcZ(6,7,"substitution-list-admin.substitution-holder-prefix")),t.xp6(2),t.hij("",o.Holder," "),t.xp6(2),t.hij(" ",t.lcZ(10,9,o.DateFrom),"\u2013"),t.xp6(3),t.hij("",t.lcZ(13,11,o.DateTo)," "),t.xp6(3),t.Q6J("ngIf",o.Remarks),t.xp6(2),t.Q6J("routerLink",t.VKq(13,zt,o.Id))}}const jt=function(){return["create-ad-hoc"]},Ht=function(){return["create"]},Xt=function(e,s,o){return{id:"Substitute",label:e,sortColumn:s,sortDirection:o}},w=function(e){return{column:e}},Bt=function(e,s,o){return{id:"Holder",label:e,sortColumn:s,sortDirection:o}},Vt=function(e,s,o){return{id:"DateFrom",label:e,sortColumn:s,sortDirection:o}},Rt=function(e,s,o){return{id:"Remarks",label:e,sortColumn:s,sortDirection:o}};let Kt=(()=>{var e;class s extends D{}return(e=s).\u0275fac=function(){let o;return function(i){return(o||(o=t.n5z(e)))(i||e)}}(),e.\u0275cmp=t.Xpm({type:e,selectors:[["erz-substitution-list-admin"]],features:[t.qOj],decls:65,vars:79,consts:[["tableHead",""],["class","bootstrap container-fluid mt-2",4,"ngIf"],[1,"bootstrap","container-fluid","mt-2"],[1,"bootstrap","row","row-bottom-divider"],[1,"bootstrap","col","d-flex","flex-row","pb-2"],[1,"w-100","d-flex","align-items-start"],[1,"w-auto","ms-3"],[1,"btn","btn-secondary","text-nowrap",3,"routerLink"],[1,"btn","btn-primary",3,"routerLink"],[1,"material-icons"],[1,"bootstrap","row"],[1,"bootstrap","col","d-flex","flex-row","mt-3","mb-3"],[1,"w-100"],[1,"search-container"],[1,"input-group"],[1,"input-group-text"],["type","text",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["class","btn btn-link text-decoration-none clear","type","button",3,"click",4,"ngIf"],[1,"w-auto","ms-3","d-block","d-md-none"],[1,"dropdown"],["type","button","id","dropdownMenuButton","data-bs-toggle","dropdown",1,"btn","btn-light"],[1,"dropdown-menu"],[1,"dropdown-item","cursor-pointer",3,"click"],[1,"bootstrap","col"],[1,"table"],[1,"column-substitute","ps-0"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"column-holder"],[1,"column-date-range"],[1,"column-remarks"],[1,"column-actions"],["infiniteScroll","",3,"scrolled"],[4,"ngFor","ngForOf"],[3,"click"],[4,"ngIf"],["type","button",1,"btn","btn-link","text-decoration-none","clear",3,"click"],[1,"d-md-none"],["class","d-flex flex-row d-md-block",4,"ngIf"],[1,"column-actions","text-end","pe-0"],[1,"d-flex","flex-row","d-md-block"],[1,"material-icons","d-md-none","me-1"]],template:function(n,i){if(1&n&&(t.YNc(0,It,3,2,"ng-template",null,0,t.W1O),t.YNc(2,yt,3,0,"div",1),t.TgZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5),t._uU(7),t.ALo(8,"translate"),t.ALo(9,"async"),t.qZA(),t.TgZ(10,"div",6)(11,"a",7),t._uU(12),t.ALo(13,"translate"),t.qZA()(),t.TgZ(14,"div",6)(15,"a",8)(16,"i",9),t._uU(17,"add"),t.qZA()()()()(),t.TgZ(18,"div",10)(19,"div",11)(20,"div",12)(21,"div",13)(22,"div",14)(23,"span",15)(24,"i",9),t._uU(25,"search"),t.qZA()(),t.TgZ(26,"input",16),t.NdJ("ngModelChange",function(a){return i.filter=a}),t.ALo(27,"translate"),t.qZA(),t.YNc(28,kt,3,0,"button",17),t.qZA()()(),t.TgZ(29,"div",18)(30,"div",19)(31,"button",20)(32,"i",9),t._uU(33,"import_export"),t.qZA()(),t.TgZ(34,"div",21)(35,"a",22),t.NdJ("click",function(){return i.sortBy("Substitute")}),t._uU(36),t.ALo(37,"translate"),t.qZA(),t.TgZ(38,"a",22),t.NdJ("click",function(){return i.sortBy("Holder")}),t._uU(39),t.ALo(40,"translate"),t.qZA(),t.TgZ(41,"a",22),t.NdJ("click",function(){return i.sortBy("DateFrom")}),t._uU(42),t.ALo(43,"translate"),t.qZA()()()()()(),t.TgZ(44,"div",10)(45,"div",23)(46,"table",24)(47,"thead")(48,"tr")(49,"th",25),t.YNc(50,Ft,1,0,null,26),t.ALo(51,"translate"),t.qZA(),t.TgZ(52,"th",27),t.YNc(53,$t,1,0,null,26),t.ALo(54,"translate"),t.qZA(),t.TgZ(55,"th",28),t.YNc(56,Yt,1,0,null,26),t.ALo(57,"translate"),t.qZA(),t.TgZ(58,"th",29),t.YNc(59,Nt,1,0,null,26),t.ALo(60,"translate"),t.qZA(),t._UZ(61,"th",30),t.qZA()(),t.TgZ(62,"tbody",31),t.NdJ("scrolled",function(){return i.onScroll()}),t.YNc(63,Qt,20,15,"tr",32),t.ALo(64,"async"),t.qZA()()()()()),2&n){const r=t.MAs(1);t.xp6(2),t.Q6J("ngIf",i.isLoading),t.xp6(1),t.Udp("display",i.isLoading?"none":null),t.xp6(4),t.AsE("",t.lcZ(8,29,"substitution-list-admin.count-label"),"",t.lcZ(9,31,i.totalCount$),""),t.xp6(4),t.Q6J("routerLink",t.DdM(53,jt)),t.xp6(1),t.Oqu(t.lcZ(13,33,"substitution-list-admin.create-ad-hoc-button-label")),t.xp6(3),t.Q6J("routerLink",t.DdM(54,Ht)),t.xp6(11),t.Q6J("placeholder",t.lcZ(27,35,"substitution-list-admin.search-placeholder"))("ngModel",i.filter),t.xp6(2),t.Q6J("ngIf",i.filter),t.xp6(7),t.ekj("active","Substitute"==i.sortColumn),t.xp6(1),t.hij("",t.lcZ(37,37,"substitution-list-admin.column-title-substitute")," "),t.xp6(2),t.ekj("active","Holder"==i.sortColumn),t.xp6(1),t.hij("",t.lcZ(40,39,"substitution-list.column-title-holder")," "),t.xp6(2),t.ekj("active","DateFrom"==i.sortColumn),t.xp6(1),t.hij("",t.lcZ(43,41,"substitution-list-admin.column-title-date-range")," "),t.xp6(8),t.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",t.VKq(59,w,t.kEZ(55,Xt,t.lcZ(51,43,"substitution-list-admin.column-title-substitute"),i.sortColumn,i.sortDirection))),t.xp6(3),t.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",t.VKq(65,w,t.kEZ(61,Bt,t.lcZ(54,45,"substitution-list.column-title-holder"),i.sortColumn,i.sortDirection))),t.xp6(3),t.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",t.VKq(71,w,t.kEZ(67,Vt,t.lcZ(57,47,"substitution-list-admin.column-title-date-range"),i.sortColumn,i.sortDirection))),t.xp6(3),t.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",t.VKq(77,w,t.kEZ(73,Rt,t.lcZ(60,49,"substitution-list-admin.column-title-remarks"),i.sortColumn,i.sortDirection))),t.xp6(4),t.Q6J("ngForOf",t.lcZ(64,51,i.substitutions$))}},dependencies:[c.sg,c.O5,c.tP,l.Fj,l.JJ,l.On,m.rH,J.Ry,S.O,c.Ov,c.uU,h.X$],styles:["[_ngcontent-%COMP%]:root{--stellvertretung-primary: #005189;--stellvertretung-primary-hover: #004272;--stellvertretung-secondary: rgb(138, 138, 138);--stellvertretung-secondary-hover: rgb(116, 116, 116)}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{cursor:pointer}.table[_ngcontent-%COMP%]   th.column-substitute[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th.column-holder[_ngcontent-%COMP%]{width:25%}.table[_ngcontent-%COMP%]   th.column-date-range[_ngcontent-%COMP%]{width:20%}.table[_ngcontent-%COMP%]   th.column-remarks[_ngcontent-%COMP%]{width:30%}.table[_ngcontent-%COMP%]   th.column-actions[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td.column-actions[_ngcontent-%COMP%]{width:1%}.table[_ngcontent-%COMP%]   td.column-remarks[_ngcontent-%COMP%]{white-space:pre-line}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:top}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:not(.column-actions){padding-top:.66rem;padding-bottom:.66rem}@media (max-width: 768px){table.table[_ngcontent-%COMP%], table.table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%]{display:contents}table.table[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%]{display:none}table.table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto min-content;grid-template-rows:auto}.container-fluid[_ngcontent-%COMP%]   table.table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]{margin-left:calc(-1 * var(--bs-gutter-x, 1.5rem));margin-right:calc(-1 * var(--bs-gutter-x, 1.5rem));padding-left:var(--bs-gutter-x, 1.5rem);padding-right:var(--bs-gutter-x, 1.5rem)}table.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{width:auto}table.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], table.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:not(.column-actions){display:block;grid-column:1;border:none;padding:.065rem 0}table.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{padding:12px 0;border-bottom:1px solid var(--bs-border-color)}table.table[_ngcontent-%COMP%]   td.column-actions[_ngcontent-%COMP%]{grid-column:2;grid-row-start:1;grid-row-end:3;white-space:nowrap;display:flexbox;flex-direction:row}table.table[_ngcontent-%COMP%]   td.column-substitute[_ngcontent-%COMP%]{font-weight:700}.search-container[_ngcontent-%COMP%]{max-width:none}}.search-container[_ngcontent-%COMP%]{max-width:540px}@media (max-width: 768px){.search-container[_ngcontent-%COMP%]{max-width:none}}button.clear[_ngcontent-%COMP%]{position:absolute;right:0;z-index:3}"]}),s})(),Gt=(()=>{var e;class s{constructor(n,i,r,a,u){this.route=n,this.authService=i,this.router=r,this.teacherSubstitutionService=a,this.changeDetector=u,this.editLink=Z=>["admin","edit",Z]}sortBy(n){this.sortColumn=n,this.changeDetector.markForCheck()}ngOnInit(){}}return(e=s).\u0275fac=function(n){return new(n||e)(t.Y36(m.gz),t.Y36(_.e),t.Y36(m.F0),t.Y36(b.u),t.Y36(t.sBO))},e.\u0275cmp=t.Xpm({type:e,selectors:[["erz-page-admin-substitution-list"]],decls:1,vars:4,consts:[[3,"filter","sort-column","substitutions$","edit-link"]],template:function(n,i){1&n&&t._UZ(0,"erz-substitution-list-admin",0),2&n&&t.Q6J("filter",i.searchString)("sort-column",i.sortColumn)("substitutions$",i.teacherSubstitutionService.getAdminList())("edit-link",i.editLink)},dependencies:[Kt]}),s})(),Wt=(()=>{var e;class s{constructor(n,i,r,a,u){this.route=n,this.router=i,this.teacherSubstitutionService=r,this.changeDetector=a,this.authService=u}ngOnInit(){}navigateToList(){this.router.navigate(["/substitutions/assign"])}}return(e=s).\u0275fac=function(n){return new(n||e)(t.Y36(m.gz),t.Y36(m.F0),t.Y36(b.u),t.Y36(t.sBO),t.Y36(_.e))},e.\u0275cmp=t.Xpm({type:e,selectors:[["erz-page-substitution-create"]],decls:2,vars:1,consts:[[1,"erz-container-limited"],[3,"holderId","cancel","save"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0)(1,"erz-substitution-create",1),t.NdJ("cancel",function(){return i.navigateToList()})("save",function(){return i.navigateToList()}),t.qZA()()),2&n&&(t.xp6(1),t.Q6J("holderId",i.authService.personId))},dependencies:[E]}),s})();function te(e,s){1&e&&(t.TgZ(0,"div"),t._UZ(1,"erz-spinner"),t.qZA())}let ee=(()=>{var e;class s{constructor(n,i,r,a){this.route=n,this.router=i,this.teacherSubstitutionService=r,this.changeDetector=a,this.isLoading=!0}ngOnInit(){this.substitution$=this.route.paramMap.pipe((0,f.b)(n=>{this.isLoading=!0,this.changeDetector.markForCheck()}),(0,p.U)(n=>n.get("id")),(0,p.U)(n=>parseInt(n)),(0,M.w)(n=>this.teacherSubstitutionService.get(n)),(0,f.b)(n=>{this.isLoading=!1,this.changeDetector.markForCheck()}),(0,I.B)()),this.substitution$.subscribe(n=>null)}navigateToList(){this.router.navigate(["/substitutions/assign"])}}return(e=s).\u0275fac=function(n){return new(n||e)(t.Y36(m.gz),t.Y36(m.F0),t.Y36(b.u),t.Y36(t.sBO))},e.\u0275cmp=t.Xpm({type:e,selectors:[["erz-page-substitution-edit"]],decls:4,vars:6,consts:[[4,"ngIf"],[1,"erz-container-limited"],[3,"substitution","save","cancel","delete"]],template:function(n,i){1&n&&(t.YNc(0,te,2,0,"div",0),t.TgZ(1,"div",1)(2,"erz-substitution-edit",2),t.NdJ("save",function(){return i.navigateToList()})("cancel",function(){return i.navigateToList()})("delete",function(){return i.navigateToList()}),t.ALo(3,"async"),t.qZA()()),2&n&&(t.Q6J("ngIf",i.isLoading),t.xp6(2),t.Udp("display",i.isLoading?"none":"block"),t.Q6J("substitution",t.lcZ(3,4,i.substitution$)))},dependencies:[c.O5,S.O,Y,c.Ov]}),s})();function ne(e,s){1&e&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"execute-substitution-list.substitution-inactive-title-message")))}function ie(e,s){1&e&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"execute-substitution-list.substitution-active-title-message")))}function oe(e,s){1&e&&(t.TgZ(0,"div"),t._UZ(1,"erz-spinner"),t.qZA())}function se(e,s){1&e&&(t.TgZ(0,"div",8),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"execute-substitution-list.empty-list-message")))}function re(e,s){if(1&e&&(t.TgZ(0,"div",20)(1,"i",21),t._uU(2,"notes"),t.qZA(),t.TgZ(3,"div"),t._uU(4),t.qZA()()),2&e){const o=t.oxw().$implicit;t.xp6(4),t.Oqu(o.substitution.Remarks)}}function ae(e,s){1&e&&t._UZ(0,"span",25)}function ue(e,s){if(1&e){const o=t.EpF();t.TgZ(0,"a",22),t.NdJ("click",function(){t.CHM(o);const i=t.oxw().$implicit,r=t.oxw(3);return t.KtG(r.startSubstitution(i.substitution.Id))}),t.TgZ(1,"span",23),t.YNc(2,ae,1,0,"span",24),t.ALo(3,"async"),t._uU(4),t.ALo(5,"translate"),t.qZA()()}if(2&e){const o=t.oxw().$implicit,n=t.oxw(3);t.ekj("invisible",!o.isActive)("d-none",!o.isActive),t.xp6(2),t.Q6J("ngIf",t.lcZ(3,6,n.workingId$)==o.substitution.Id),t.xp6(2),t.hij(" ",t.lcZ(5,8,"execute-substitution-list.start-button-label")," ")}}function le(e,s){1&e&&(t.TgZ(0,"span",26),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"execute-substitution-list.active-label")))}function ce(e,s){1&e&&t._UZ(0,"span",25)}function de(e,s){if(1&e){const o=t.EpF();t.TgZ(0,"a",22),t.NdJ("click",function(){t.CHM(o);const i=t.oxw().$implicit,r=t.oxw(3);return t.KtG(r.stopSubstitution(i.substitution.Id))}),t.TgZ(1,"span",23),t.YNc(2,ce,1,0,"span",24),t.ALo(3,"async"),t._uU(4),t.ALo(5,"translate"),t.qZA()()}if(2&e){const o=t.oxw().$implicit,n=t.oxw(3);t.ekj("invisible",!o.isActive)("d-none",!o.isActive),t.xp6(2),t.Q6J("ngIf",t.lcZ(3,6,n.workingId$)==o.substitution.Id),t.xp6(2),t.hij(" ",t.lcZ(5,8,"execute-substitution-list.stop-button-label")," ")}}function me(e,s){if(1&e&&(t.TgZ(0,"tr")(1,"td",10)(2,"span",15),t._uU(3),t.ALo(4,"translate"),t.qZA(),t._uU(5),t.qZA(),t.TgZ(6,"td",11),t._uU(7),t.ALo(8,"date"),t._UZ(9,"wbr"),t._uU(10),t.ALo(11,"date"),t.qZA(),t.TgZ(12,"td",12),t.YNc(13,re,5,1,"div",16),t.qZA(),t.TgZ(14,"td",17),t.YNc(15,ue,6,10,"a",18),t.YNc(16,le,3,3,"span",19),t.YNc(17,de,6,10,"a",18),t.qZA()()),2&e){const o=s.$implicit,n=t.oxw(3);t.xp6(3),t.Oqu(t.lcZ(4,8,"execute-substitution-list.substitution-holder-prefix")),t.xp6(2),t.hij("",o.substitution.Holder," "),t.xp6(2),t.hij(" ",t.lcZ(8,10,o.substitution.DateFrom),"\u2013"),t.xp6(3),t.hij("",t.lcZ(11,12,o.substitution.DateTo)," "),t.xp6(3),t.Q6J("ngIf",o.substitution.Remarks),t.xp6(2),t.Q6J("ngIf",n.currentSubstitutionId!=o.substitution.Id),t.xp6(1),t.Q6J("ngIf",n.currentSubstitutionId==o.substitution.Id),t.xp6(1),t.Q6J("ngIf",n.currentSubstitutionId==o.substitution.Id)}}function pe(e,s){if(1&e&&(t.TgZ(0,"table",9)(1,"thead")(2,"tr")(3,"th",10),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"th",11),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"th",12),t._uU(10),t.ALo(11,"translate"),t.qZA(),t._UZ(12,"th",13),t.qZA()(),t.TgZ(13,"tbody"),t.YNc(14,me,18,14,"tr",14),t.qZA()()),2&e){const o=t.oxw().ngIf,n=t.oxw();t.Udp("display",n.isLoading?"none":null),t.xp6(4),t.Oqu(t.lcZ(5,6,"execute-substitution-list.column-title-holder")),t.xp6(3),t.Oqu(t.lcZ(8,8,"execute-substitution-list.column-title-date-range")),t.xp6(3),t.Oqu(t.lcZ(11,10,"execute-substitution-list.column-title-remarks")),t.xp6(4),t.Q6J("ngForOf",o)}}function ge(e,s){if(1&e&&(t.TgZ(0,"div",2),t.YNc(1,se,3,3,"ng-template",null,6,t.W1O),t.YNc(3,pe,15,12,"table",7),t.qZA()),2&e){const o=s.ngIf,n=t.MAs(2);t.xp6(3),t.Q6J("ngIf",o.length>0)("ngIfElse",n)}}let be=(()=>{var e;class s{constructor(n,i,r){this.teacherSubstitutionService=n,this.changeDetector=i,this.authService=r,this.isLoading=!0,this.currentSubstitutionId=null,this.update$=new g.X(new Date),this.workingId$=new g.X(-1)}ngOnInit(){const n=(a,u)=>a==u?0:(a??"")>(u??"")?-1:1;this.substitutions$=this.authService.substitutionId$.pipe((0,f.b)(a=>this.currentSubstitutionId=a),(0,M.w)(a=>this.teacherSubstitutionService.getCurrentList()),(0,p.U)(a=>Array.from(a).sort((a=>(u,Z)=>((a,u,Z)=>{for(let[P,y]of Z){let A=n(P(a),P(u));if(y&&(A*=-1),0!=A)return A}return 0})(u,Z,a))([[u=>this.currentSubstitutionId==u.Id,!1],[u=>u.DateFrom,!0]]))),(0,p.U)(a=>a.map(u=>({substitution:u,isActive:u.DateFrom<new Date}))),(0,f.b)(a=>{this.isLoading=!1,this.changeDetector.markForCheck()}))}startSubstitution(n){this.workingId$.next(n),this.teacherSubstitutionService.start(n).subscribe(i=>{this.currentSubstitutionId=n,this.changeDetector.markForCheck(),this.update$.next(new Date),this.workingId$.next(-1)})}stopSubstitution(n){this.workingId$.next(n),this.teacherSubstitutionService.stop(n).subscribe(i=>{this.currentSubstitutionId=null,this.changeDetector.markForCheck(),this.update$.next(new Date),this.workingId$.next(-1)})}}return(e=s).\u0275fac=function(n){return new(n||e)(t.Y36(b.u),t.Y36(t.sBO),t.Y36(_.e))},e.\u0275cmp=t.Xpm({type:e,selectors:[["erz-substitution-list-current"]],decls:9,vars:6,consts:[[1,"bootstrap","container-fluid","mt-2"],[1,"bootstrap","row","row-bottom-divider","pb-2"],[1,"bootstrap","col"],[4,"ngIf"],[1,"bootstrap","row"],["class","bootstrap col",4,"ngIf"],["empty",""],["class","table",3,"display",4,"ngIf","ngIfElse"],[1,"pt-2"],[1,"table"],[1,"substitution-holder"],[1,"substitution-date-range"],[1,"substitution-remarks"],[1,"substitution-actions"],[4,"ngFor","ngForOf"],[1,"d-md-none"],["class","d-flex flex-row d-md-block",4,"ngIf"],[1,"substitution-actions","text-md-end","text-start"],["class","btn btn-primary d-md-inline-block",3,"invisible","d-none","click",4,"ngIf"],["class","active-label text-success me-3",4,"ngIf"],[1,"d-flex","flex-row","d-md-block"],[1,"material-icons","d-md-none","me-1"],[1,"btn","btn-primary","d-md-inline-block",3,"click"],[1,"d-flex","align-items-center"],["class","spinner-border spinner-border-sm me-2","role","status","aria-hidden","true",4,"ngIf"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-2"],[1,"active-label","text-success","me-3"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t.YNc(3,ne,3,3,"span",3),t.YNc(4,ie,3,3,"span",3),t.qZA()(),t.YNc(5,oe,2,0,"div",3),t.TgZ(6,"div",4),t.YNc(7,ge,4,2,"div",5),t.ALo(8,"async"),t.qZA()()),2&n&&(t.xp6(3),t.Q6J("ngIf",null==i.currentSubstitutionId),t.xp6(1),t.Q6J("ngIf",null!=i.currentSubstitutionId),t.xp6(1),t.Q6J("ngIf",i.isLoading),t.xp6(2),t.Q6J("ngIf",t.lcZ(8,4,i.substitutions$)))},dependencies:[c.sg,c.O5,S.O,c.Ov,c.uU,h.X$],styles:["[_ngcontent-%COMP%]:root{--stellvertretung-primary: #005189;--stellvertretung-primary-hover: #004272;--stellvertretung-secondary: rgb(138, 138, 138);--stellvertretung-secondary-hover: rgb(116, 116, 116)}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:top}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:not(.substitution-actions){padding-top:.66rem;padding-bottom:.66rem}table[_ngcontent-%COMP%]   th.substitution-holder[_ngcontent-%COMP%]{width:25%}table[_ngcontent-%COMP%]   th.substitution-date-range[_ngcontent-%COMP%]{width:20%}table[_ngcontent-%COMP%]   th.substitution-remarks[_ngcontent-%COMP%]{width:30%}table[_ngcontent-%COMP%]   th.substitution-actions[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   td.substitution-actions[_ngcontent-%COMP%]{width:1%}@media (max-width: 768px){table.table[_ngcontent-%COMP%], table.table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%]{display:contents}table.table[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%]{display:none}table.table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]{width:auto;display:grid;grid-template-columns:auto min-content;grid-template-rows:auto;align-items:center}table.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:not(.substitution-actions){display:block;grid-column:1;border:none;padding:.065rem 0;grid-column-start:1;grid-column-end:3}table.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{padding:12px 0;border-bottom:1px solid var(--bs-border-color)}table.table[_ngcontent-%COMP%]   td.substitution-actions[_ngcontent-%COMP%]{display:contents}table.table[_ngcontent-%COMP%]   td.substitution-actions[_ngcontent-%COMP%] > .active-label[_ngcontent-%COMP%]{grid-column:1}table.table[_ngcontent-%COMP%]   td.substitution-actions[_ngcontent-%COMP%] > .btn[_ngcontent-%COMP%]{grid-column:2}table.table[_ngcontent-%COMP%]   td.substitution-holder[_ngcontent-%COMP%]{font-weight:700}.container-fluid[_ngcontent-%COMP%]   table.table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]{margin-left:calc(-1 * var(--bs-gutter-x, 1rem));margin-right:calc(-1 * var(--bs-gutter-x, 1rem));padding-left:var(--bs-gutter-x, 1rem);padding-right:var(--bs-gutter-x, 1rem)}}table.table[_ngcontent-%COMP%]{width:100%}table.table[_ngcontent-%COMP%]   td.substitution-actions[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin-left:3px}table.table[_ngcontent-%COMP%]   td.substitution-actions[_ngcontent-%COMP%]{white-space:nowrap}table.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child, table.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{padding-left:0}table.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child, table.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{padding-right:0}.sidebar-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto min-content;grid-template-rows:auto}"]}),s})(),_e=(()=>{var e;class s{constructor(n,i,r,a){this.route=n,this.router=i,this.teacherSubstitutionService=r,this.changeDetector=a,this.isLoading=!0}ngOnInit(){}}return(e=s).\u0275fac=function(n){return new(n||e)(t.Y36(m.gz),t.Y36(m.F0),t.Y36(b.u),t.Y36(t.sBO))},e.\u0275cmp=t.Xpm({type:e,selectors:[["erz-page-substitution-list-current"]],decls:1,vars:0,template:function(n,i){1&n&&t._UZ(0,"erz-substitution-list-current")},dependencies:[be]}),s})();const he=function(){return["create"]},fe=[{path:"assign",canActivate:[O.a],component:(()=>{var e;class s{constructor(n,i,r,a,u){this.route=n,this.authService=i,this.router=r,this.teacherSubstitutionService=a,this.changeDetector=u}ngOnInit(){}}return(e=s).\u0275fac=function(n){return new(n||e)(t.Y36(m.gz),t.Y36(_.e),t.Y36(m.F0),t.Y36(b.u),t.Y36(t.sBO))},e.\u0275cmp=t.Xpm({type:e,selectors:[["erz-page-substitution-list"]],decls:11,vars:9,consts:[[1,"bootstrap","container-fluid","mt-2"],[1,"bootstrap","row","row-bottom-divider"],[1,"bootstrap","col","pb-2","overflow-hidden"],[1,"float-end","ms-1","mb-1"],[1,"btn","btn-primary",3,"routerLink"],[1,"material-icons"],[3,"substitutions$","empty-message"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"a",4)(5,"i",5),t._uU(6,"add"),t.qZA()()(),t._uU(7),t.ALo(8,"translate"),t.qZA()()(),t._UZ(9,"erz-substitution-list",6),t.ALo(10,"translate")),2&n&&(t.xp6(4),t.Q6J("routerLink",t.DdM(8,he)),t.xp6(3),t.hij(" ",t.lcZ(8,4,"page-substitution-list.title-message")," "),t.xp6(2),t.Q6J("substitutions$",i.teacherSubstitutionService.getMyList())("empty-message",t.lcZ(10,6,"page-substitution-list.empty-message")))},dependencies:[m.rH,D,h.X$]}),s})()},{path:"assign/edit/:id",canActivate:[O.a],component:ee},{path:"assign/create",canActivate:[O.a],component:Wt},{path:"admin/create",canActivate:[T],component:et},{path:"admin/create-ad-hoc",canActivate:[T],component:lt},{path:"admin/edit/:id",canActivate:[T],component:Zt},{path:"admin",canActivate:[T],component:Gt},{path:"execute",canActivate:[O.a],component:_e}];let Ce=(()=>{var e;class s{}return(e=s).\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[m.Bz.forChild(fe),m.Bz]}),s})(),Ze=(()=>{var e;class s{}return(e=s).\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[j.m,Ce,c.ez]}),s})()}}]);